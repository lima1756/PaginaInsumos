(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{104:function(e,t,a){},121:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(11),r=a.n(l),c=(a(39),a(5)),i=(a(40),a(41),a(4));a(86);var s=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),l=a[0],r=a[1],i=Object(n.useState)(null),s=Object(c.a)(i,2),u=s[0],d=s[1];return o.a.createElement("div",{className:"SearchBar"},o.a.createElement("div",{className:l?"search open":"search"},o.a.createElement("input",{type:"search",className:"browser-default search-box",ref:function(e){d(e)},value:e.searchValue,onChange:function(t){e.setSearchValue(t.target.value)}}),o.a.createElement("span",{className:"search-button",onClick:function(){if(""===e.searchValue){var t=!l;r(t),t&&u&&u.focus()}else alert(e.searchValue)}},o.a.createElement("span",{className:"search-icon"}))))},u=a(8),d=a(12),m=a.n(d),p=(a(104),"");m.a.get("/mapspoint").then((function(e){p=e.data.key})).catch((function(e){console.log(e)}));var g=Object(u.GoogleApiWrapper)({apiKey:p})((function(e){return o.a.createElement("div",{className:"Map"},o.a.createElement(u.Map,{style:{width:"100%",height:"80vh"},containerStyle:{position:"relative",width:"100%",height:"80vh"},google:e.google,zoom:14,initialCenter:null!=e.location?{lat:e.location.latitude,lng:e.location.longitude}:{lat:0,lng:0},onClick:e.onMapClicked},e.children))})),f=a(33);var v=function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),l=a[0],r=a[1],s=Object(n.useState)(""),u=Object(c.a)(s,2),d=u[0],p=u[1],g=Object(n.useState)({maskType:[],quantity:[],price:[]}),f=Object(c.a)(g,2),v=f[0],b=f[1],h=Object(n.useState)(0),y=Object(c.a)(h,2),E=y[0],k=y[1],O=function(e,t){return function(a){var n=JSON.parse(JSON.stringify(v));n[e][t]=a.target.value,b(n)}};return o.a.createElement(i.Modal,{actions:[o.a.createElement(i.Button,{flat:!0,modal:"close",node:"button",waves:"green",onClick:function(){e.setVisible(!1)}},"Close")],bottomSheet:!1,fixedFooter:!1,header:"Add you store",id:"Modal-0",open:e.visible,options:{dismissible:!0,endingTop:"10%",inDuration:250,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,opacity:.5,outDuration:250,preventScrolling:!0,startingTop:"4%"}},o.a.createElement("div",null,o.a.createElement(i.TextInput,{label:"Store name",value:d,onChange:function(e){p(e.target.value)}}),o.a.createElement(i.TextInput,{label:"Address",value:l,onChange:function(e){r(e.target.value)}}),o.a.createElement(i.TextInput,{type:"number",label:"Number of items you want to add",value:E,onChange:function(e){k(e.target.value);for(var t=[],a=[],n=0;n<e.target.value;n++)t.push(""),a.push(0);b({maskType:t,quantity:a,price:a})}})),v.price.map((function(e,t){return o.a.createElement(i.Row,{key:t},o.a.createElement(i.TextInput,{label:"Mask Type",value:v.maskType[t],onChange:O("maskType",t)}),o.a.createElement(i.TextInput,{label:"Quantity",type:"number",value:v.quantity[t],onChange:O("quantity",t)}),o.a.createElement(i.TextInput,{label:"Price",type:"number",value:v.price[t],onChange:O("price",t)}))})),o.a.createElement(i.Button,{node:"submit",waves:"light",onClick:function(){if(E<=0)alert("please add inventory");else{var e={address:l,storeId:d,inventory:v};m.a.post("/addstore",e).then((function(e){console.log(e)}),(function(e){console.log(e)}))}}},"Submit"))};a(120);var b=Object(f.geolocated)({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3})((function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2),l=a[0],r=a[1],d=Object(n.useState)(""),p=Object(c.a)(d,2),f=p[0],b=p[1],h=Object(n.useState)({}),y=Object(c.a)(h,2),E=y[0],k=y[1],O=Object(n.useState)({}),j=Object(c.a)(O,2),S=(j[0],j[1]),C=Object(n.useState)(!0),I=Object(c.a)(C,2),T=I[0],N=I[1],w=Object(n.useState)(!1),M=Object(c.a)(w,2),q=M[0],x=M[1];Object(n.useEffect)((function(){!function(e){var t={};null!=e&&(t={area:e}),m.a.get("/stores",t).then((function(e){console.log(e.data),r(e.data)})).catch((function(e){console.log(e),r([{_id:1,storeId:1,address:"direccion 1",lat:"20.685950",long:"-103.377770",inventory:{maskType:[1],quantity:[20],price:[5]}},{_id:2,storeId:2,address:"direccion 2",lat:"20.660874",long:"-103.350021",inventory:{maskType:[1,5],quantity:[1,2],price:[1,2]}},{_id:4,storeId:3,address:"direccion 3",lat:"20.679046",long:"-103.371433",inventory:{maskType:[20],quantity:[100],price:[200]}}])}))}(),S(A),N(!0)}),[]);var V=function(e){return-1===e?function(e,t,a){k({address:"Your position"}),S(A),N(!0)}:function(t,a,n){var o=B[e+""];console.log(o),k(o),S(o.marker),N(!0)}},A={};A=e.coords?o.a.createElement(u.Marker,{title:"Your location",name:"YOU",position:{lat:e.coords.latitude,lng:e.coords.longitude},onClick:V(-1)}):o.a.createElement(u.Marker,{title:"Your location",name:"YOU",position:{lat:0,lng:0},onClick:V(-1)});for(var B={},D=0;D<l.length;D++){var Y=l[D];B[Y.storeId]?(B[Y.storeId].maskType.push(Y.maskType),B[Y.storeId].quantity.push(Y.quantity)):B[Y.storeId]={storeId:Y.storeId,address:Y.address,lat:Y.lat,long:Y.long,maskType:[Y.maskType],quantity:[Y.quantity],marker:o.a.createElement(u.Marker,{key:Y.storeId,name:Y.address,onClick:V(Y.storeId),position:{lat:Y.lat,lng:Y.long}})}}return o.a.createElement("div",{className:"App"},o.a.createElement(i.Navbar,{className:"navbar",alignLinks:"right",brand:o.a.createElement("a",{className:"brand-logo",href:"#"},o.a.createElement("img",{src:"/static/imgs/logo.png"})),id:"mobile-nav",menuIcon:o.a.createElement(i.Icon,null,"menu"),options:{draggable:!0,edge:"left",inDuration:250,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,outDuration:200,preventScrolling:!0}},o.a.createElement(i.NavItem,{href:"#",onClick:function(){x(!0)}},"Add store")),o.a.createElement("div",{className:"MapContainer"},o.a.createElement(s,{setSearchValue:b,searchValue:f}),o.a.createElement(g,{location:e.coords,searchResults:l,stores:B,onMapClicked:function(e){T&&N(!1)}},Object.keys(B).map((function(e){return B[e].marker})),A,o.a.createElement(u.InfoWindow,{position:{lat:E.lat,lng:E.long},visible:T},o.a.createElement("div",null,E.address)," "))),o.a.createElement("div",{className:"results"},o.a.createElement(i.Table,null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{"data-field":"id"},"Location"),o.a.createElement("th",{"data-field":"name"},"Mask Type"),o.a.createElement("th",{"data-field":"price"},"Qty"),o.a.createElement("th",{"data-field":"price"},"Price"))),o.a.createElement("tbody",null,l.map((function(e){return o.a.createElement("tr",{key:e._id,onClick:V(e.storeId),className:"clickable"},o.a.createElement("td",null,e.address),o.a.createElement("td",null,e.inventory.maskType.reduce((function(e,t){return e+", "+t}))),o.a.createElement("td",null,e.inventory.quantity.reduce((function(e,t){return e+", "+t}))),o.a.createElement("td",null,e.inventory.price.reduce((function(e,t){return e+", "+t}))))}))))),o.a.createElement(v,{visible:q,setVisible:x}))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},34:function(e,t,a){e.exports=a(121)},39:function(e,t,a){},40:function(e,t,a){},86:function(e,t,a){}},[[34,1,2]]]);
//# sourceMappingURL=main.6a002e92.chunk.js.map